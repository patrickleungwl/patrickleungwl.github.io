
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="2023/character/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>OpenACR on EndeavourOS - ThinkNotes</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Serif:300,300i,400,400i,700,700i%7CRoboto+Mono,+10:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Serif";--md-code-font:"Roboto Mono, 10"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="yellow">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openacr-style" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="ThinkNotes" class="md-header__button md-logo" aria-label="ThinkNotes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ThinkNotes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenACR on EndeavourOS
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="ThinkNotes" class="md-nav__button md-logo" aria-label="ThinkNotes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ThinkNotes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          OpenACR on EndeavourOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        OpenACR on EndeavourOS
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#openacr-style" class="md-nav__link">
    OpenACR style
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-build" class="md-nav__link">
    First build
  </a>
  
    <nav class="md-nav" aria-label="First build">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringop-overflow" class="md-nav__link">
    stringop-overflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mariadbmysqlh" class="md-nav__link">
    mariadb/mysql.h
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello World
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-step" class="md-nav__link">
    Next Step
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          2023
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          2023
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/character/" class="md-nav__link">
        Character
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/cryptobro/" class="md-nav__link">
        Crypto Bro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/fallforward/" class="md-nav__link">
        Fall Forward
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/generations/" class="md-nav__link">
        Generations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/gotproblems/" class="md-nav__link">
        Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/lieflat/" class="md-nav__link">
        Feeling Great
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/lighter/" class="md-nav__link">
        The Lighter Side
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/mispriced/" class="md-nav__link">
        Mispriced
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/unstoppable/" class="md-nav__link">
        Unstoppable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/words/" class="md-nav__link">
        Words
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
      
      
      
        <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
          Reads
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_11">
          <span class="md-nav__icon md-icon"></span>
          Reads
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/Reads/dontsweat/" class="md-nav__link">
        Don't Sweat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/Reads/framauro/" class="md-nav__link">
        Fra Mauro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="2023/Reads/thebondking/" class="md-nav__link">
        The Bond King
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Linux/endeavour/" class="md-nav__link">
        Endeavour OS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="about/about/" class="md-nav__link">
        About ThinkNotes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="about/bio/" class="md-nav__link">
        Bio
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Archives
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Archives
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
          2016
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          2016
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-04-02-lky-on-management/" class="md-nav__link">
        LKY on Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-04-03-insprirational-quotes/" class="md-nav__link">
        Inspirational Quotes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-04-07-getting-things-done/" class="md-nav__link">
        Getting Things Done
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-05-01-sg-math-primary-five-ratio/" class="md-nav__link">
        Singapore Math Primary 5 Five Ratio Question
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-05-02-sg-math-second_math_question/" class="md-nav__link">
        Singapore Math Primary 5 Second Math Question
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-09-11-fifteen-years-on/" class="md-nav__link">
        Fifteen Years On
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-09-18-get-through-hard/" class="md-nav__link">
        Get through hard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-10-08-the-management-masterclass/" class="md-nav__link">
        The Management Masterclass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-10-09-the-spirit-of-kaizen/" class="md-nav__link">
        The Spirit of Kaizen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2016/2016-12-08-riskfree-profit-strategies/" class="md-nav__link">
        Risk-free Profit Strategies
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
          2017
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          2017
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2017/2017-03-21-timing_numpy/" class="md-nav__link">
        Timing NumPy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2017/2017-04-23-the-tao-of_charlie-munger/" class="md-nav__link">
        The Tao of Charlie Munger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2017/2017-06-03-fooled-by-randomness/" class="md-nav__link">
        Fooled By Randomness
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2017/2017-06-11-basic-matplotlib/" class="md-nav__link">
        Basic Matplotlib Plot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2017/2017-06-24-the-effective-engineer/" class="md-nav__link">
        The Effective Engineer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2017/2017-09-03-managing/" class="md-nav__link">
        Managing, by Harold Geneen
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          2019
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          2019
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2019/2019-02-20-how-to-use-slide-rules/" class="md-nav__link">
        How to use slide rules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2019/2019-07-20-all-about-dieting/" class="md-nav__link">
        Food smarts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          2020
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          2020
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2020/2020-01-10-colossal_failure/" class="md-nav__link">
        A Colossal Failure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2020/2020-02-09-the-hard-things/" class="md-nav__link">
        The Hard Thing About Hard Things
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2020/2020-02-11-who-gets-what/" class="md-nav__link">
        Who Gets What And Why
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2020/2020-03-01-many-ideas/" class="md-nav__link">
        Ideas From Many Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2020/2020-04-25-motivation/" class="md-nav__link">
        What's my Motivation?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2020/2020-11-28-potpourri/" class="md-nav__link">
        Potpourri of items
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
          2022
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          2022
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2022/2022-12-31-colors/" class="md-nav__link">
        Design colors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2022/most/" class="md-nav__link">
        The Most Important Thing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="archives/2022/predictions/" class="md-nav__link">
        Predictions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Cheats
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Cheats
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cheats/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cheats/nix/" class="md-nav__link">
        Nix
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#openacr-style" class="md-nav__link">
    OpenACR style
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-build" class="md-nav__link">
    First build
  </a>
  
    <nav class="md-nav" aria-label="First build">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringop-overflow" class="md-nav__link">
    stringop-overflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mariadbmysqlh" class="md-nav__link">
    mariadb/mysql.h
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello World
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-step" class="md-nav__link">
    Next Step
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>OpenACR on EndeavourOS</h1>

<p>I have been a big fan of EndeavourOS, a Arch-based Linux OS, for the past year.<br />
And at the same time, I am a new adopter of
<a href="https://github.com/alexeilebedev/openacr">Alexei Lebedev's OpenACR </a>.  My idea
at the beginning of 2024 was "why not try out both at the same time?" It would be
a challenging experience to document the learning effort on using OpenACR on a 
new OS.</p>
<p>First of all, what is <strong>EndeavourOS</strong>?  <a href="https://endeavouros.com">EndeavourOS</a> 
is a minimal Linux distribution which has been a delight to use over the past year.
On my home desktop, a relatively weak Lenovo ThinkCentre M92p, this OS has been 
stable and performant.  Moreover, its dark space-based themes look simply cool
and modern.</p>
<p><img alt="EndeavourOS Desktop" src="assets/images/202402/EndeavourOS.png" /></p>
<p>And second, what is <strong>OpenACR</strong>?  OpenACR is a software framework for building software.
In other words, it is meta-software, a tool that builds other tools.  It relies 
on a common data dictionary to store a program's data structures and generates
the necessary code for managing their memory allocations, deallocations, lookups,
and updates.  In brief, OpenACR is a code generator which generates code from 
application metadata.</p>
<h2 id="openacr-style">OpenACR style</h2>
<p>While the use of code generation is not new, there are <strong>pros and cons</strong> with 
OpenACR's approach.  The pros with code generation is that 1) common bugs with 
handling memory are mostly avoided, 2) that all code in an organization looks 
standardized, and 3) most everyone can read each other's code.  One con with 
OpenACR is effort it takes some time for a C++ developer to get used to reading 
the generated code.  A C++ developer usually expects to see classes structured 
around data and functions that handle that data.  With generated OpenACR code, 
this idea is instead reversed.</p>
<p>What do I mean by <em>reversed</em> C++ code?  I can explain better with a concrete example. 
Let's say we have two data structures each with its own sort operation.  In C++, we'd 
see something like this:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code><span style="font-weight: bold">class</span> <span style="font-weight: bold">A</span> {
  <span style="font-weight: bold">int</span> a[10];
<span style="font-weight: bold">public</span>:
  <span style="font-weight: bold">void</span> sort();
};

<span style="font-weight: bold">class</span> <span style="font-weight: bold">B</span> {
  <span style="font-weight: bold">double</span> b[10];
<span style="font-weight: bold">public</span>:
  <span style="font-weight: bold">void</span> sort();
};
</code></pre></div>
<p>With OpenACR, the generated code would look something like this:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code><span style="font-weight: bold">struct</span> <span style="font-weight: bold">A</span> {
    <span style="font-weight: bold">int</span> a[10];
};

<span style="font-weight: bold">struct</span> <span style="font-weight: bold">B</span> {
    <span style="font-weight: bold">double</span> b[10];
};

<span style="font-weight: bold">void</span> sort(A &amp;a);
<span style="font-weight: bold">void</span> sort(B &amp;b);
</code></pre></div>
<p>By using function overloading, OpenACR applies the same uniform functions across
all applicable data structures.  (Side note: This may remind you of template-based
programming.  OpenACR generates all code rather than rely on templates.  I'd leave
aside debating the pros and cons of template-based programming for another day.)</p>
<p>To use OpenACR, a developer avoids thinking about classes and member functions and 
rather, thinks about generated functions that operates on data structures.  It's 
<em>reversed</em>.  This may take some time to digest and wrap your head around.  But 
this style works and this is its own style of programming.</p>
<h2 id="first-build">First build</h2>
<p>The first step to building OpenACR is to get the code and build.  On a modern
64-bit Ubuntu OS, it would be as easy as:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>git clone https://github.com/alexeilebedev/openacr.git
cd openacr
ai
</code></pre></div>
<h3 id="pre-requisites">Pre-requisites</h3>
<p>A quick look at OpenACR's dependencies shows a dependencies on mariadb, ssl, lz4 and 
cppcheck.  In EndeavourOS, these can be installed quickly using yay:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>yay mariadb

4 extra/mariadb-clients 11.2.3-1 (1.9 MiB 32.8 MiB)
    MariaDB client tools
3 extra/mariadb-libs 11.2.3-1 (5.6 MiB 24.0 MiB) (Installed: 11.1.2-1)
    MariaDB libraries
2 extra/percona-server 8.1.0_1-2 (26.7 MiB 187.7 MiB)
    Drop-in replacement for MySQL that provides improved performance, diagnostics, instrumentation and MyRocks storage engine
1 extra/mariadb 11.2.3-1 (29.4 MiB 212.8 MiB)
    Fast SQL database server, derived from MySQL
==&gt; Packages to install (eg: 1 2 3, 1-3 or ^4)
==&gt; 1,3,4
Sync Explicit (1): mariadb-11.2.3-1
resolving dependencies...
looking for conflicting packages...

extra/mariadb-clients               11.2.3-1      32.79 MiB       1.89 MiB
extra/mariadb-libs     11.1.2-1     11.2.3-1       0.22 MiB       5.60 MiB
extra/mariadb                       11.2.3-1     212.76 MiB      29.36 MiB

(install steps continued normally)
</code></pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>yay lz4

 core/lz4 1:1.9.4-2 (509.5 KiB 1.8 MiB) (Installed: 1:1.9.4-1)
    Extremely fast compression algorithm
==&gt; Packages to install (eg: 1 2 3, 1-3 or ^4)
==&gt; 1

(install steps continued normally)
</code></pre></div>
<p>To be exact, here are my development machine specs:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>OS kernel   6.4.11-arch2-1
gcc version 13.2.1 20230801
</code></pre></div>
<h3 id="stringop-overflow">stringop-overflow</h3>
<p>But running the first build of OpenACR on EndeavourOS, the make fails with these errors:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>g++ -x c++ -Wno-invalid-offsetof -ffunction-sections -fdata-sections -Wsequence-point -Wno-multichar -Wall -Wshadow -pipe -Wextra -Winit-self -Wmissing-include-dirs -Wmissing-declarations -Winvalid-pch -iquote . -Wno-vla -fpch-preprocess -Wno-class-memaccess -Wpedantic -c cpp/gen/algo_gen.cpp -o build/release/cpp.gen.algo_gen.o -msse4.2 -D AOS_SSE42 -O3 -fno-strict-aliasing -Werror -Wno-unused-local-typedefs -Wno-long-long -Wno-cast-function-type
In function ‘void algo::ch_SetStrptr(LnumStr4_U32&amp;, const strptr&amp;)’,
    inlined from ‘bool algo::ch_ReadStrptrMaybe(LnumStr4_U32&amp;, strptr)’ at cpp/gen/algo_gen.cpp:4249:21:
cpp/gen/algo_gen.cpp:4270:22: error: writing 1 byte into a region of size 0 [-Werror=stringop-overflow=]
 4270 |         parent.ch[j] = rhs_elems[i];
      |         ~~~~~~~~~~~~~^~~~~~~~~~~~~~
In file included from ./include/algo.h:33,
                 from cpp/gen/algo_gen.cpp:25:
./include/gen/algo_gen.h: In function ‘bool algo::ch_ReadStrptrMaybe(LnumStr4_U32&amp;, strptr)’:
./include/gen/algo_gen.h:2677:8: note: at offset 4 into destination object ‘algo::LnumStr4_U32::ch’ of size 4
 2677 |     u8 ch[4];
      |        ^~
</code></pre></div>
<p>Googling for stringop-overflow errors point to this spurious problem with gcc version 11 and up.</p>
<p>According to a <a href="https://www.mail-archive.com/dev@dpdk.org/msg163488.html">17 Apr 2020 post by Bruce Richardson at Intel</a></p>
<blockquote>
<p>stringop-overflow warns when it sees a possible overflow
in a string operation.</p>
<p>In the rte_memcpy functions different branches are taken
depending on the size. stringop-overflow is raised for the
branches in the function where it sees the static size of the
src could be overflowed.</p>
<p>However, in reality a correct size argument and in some cases
dynamic allocation would ensure that this does not happen.</p>
</blockquote>
<p>Reading this and other online posts revealed several possible workarounds:</p>
<ol>
<li>disable the warning using a compiler option</li>
<li>use a pragama to disable the warning on specific files</li>
<li>use clang</li>
<li>upgrade to the most recent gcc</li>
<li>lower or disable the compiler optimizations</li>
</ol>
<p>While I could've tried any or all of these options, I opted to disable the compiler 
optimizations as a quick fix.  This was replacing the -O3 gcc compiler flag in 
bin/bootstrap/Linux-g++.release-x86-64 to -O2.</p>
<p>Reducing the compiler optimizations removed the stringop-overflow warnings. </p>
<p><strong>Edit</strong> A read of the OpenACR readme shows that <a href="https://github.com/alexeilebedev/openacr?tab=readme-ov-file#known-issues">this compiler issue is a known 
problem</a>.
Perhaps the makefile should thrown up a warning when building with gcc &gt;= version 8 
and O3?</p>
<p><em>Follow-up</em> I took another look at this build problem.  The command ai runs the 
script bin/select-bootstrap to consider the specific build file for the system's 
architecture and compiler.  The problem with this script is that it only considers
the compilers clang++ and g++.  It does not detect the compiler's version so it
never considers running the bootstrap script for gc++ version 9 or higher.  This
is a <strong>script issue</strong> that should be fixed.</p>
<h3 id="mariadbmysqlh">mariadb/mysql.h</h3>
<p>The next compiler error I encountered was this:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>In file included from cpp/gen/lib_mysql_gen.cpp:26:                                          
./include/gen/lib_mysql_gen.h:26:10: fatal error: mariadb/mysql.h: No such file or directory                                                
   26 | #include &lt;mariadb/mysql.h&gt;                                                           
      |          ^~~~~~~~~~~~~~~~~    
</code></pre></div>
<p>This looked odd because I was sure I installed mariadb as part of my pre-requisites check. 
However I could not find a /usr/include/mariadb/mysql.h on my system.  Instead, I found a
/usr/include/mysql/mysql.h.  It looked like on my system, the mariadb files were installed
in a mysql folder rather than to mariadb folder. </p>
<p>I compared the mariadb files as packaged for Debian and as packaged for Arch-Linux.</p>
<p><a href="https://packages.debian.org/sid/i386/libmariadb-dev/filelist">Mariadb package for Debian</a>
shows:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>/usr/include/mariadb/mysql.h
</code></pre></div>
<p><a href="https://archlinux.org/packages/extra/x86_64/mariadb-libs">Mariadb package for Arch-Linux</a>
shows:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>usr/include/mysql/mysql.h
</code></pre></div>
<p>Indeed, for Arch-Linux, the mariadb header files are installed under the older mysql folder
name.  With this confirmed, a quick solution was to make a mariadb softlink to mysql- like 
this:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>cd /usr/include
sudo ln -s mysql mariadb
</code></pre></div>
<p>With this quick hack, the OpenARC ai build completed for the first time.</p>
<h2 id="hello-world">Hello World</h2>
<p>Following tradition, I created a Hello World application as a first trial run of the 
environment.  To do this, run this as a trial run:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>acr_ed -create -target hello
</code></pre></div>
<p>After inspecting the planned updates, commit the changes for real:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%;"><span></span><code>acr_ed -create -target hello -write
</code></pre></div>
<p>Running this command ran into the same compiler optimization issue I encountered
previously.  The abt build command picked out the O3 optmization level for g++ version
8.  The compiler options are stored in data/dev/tool_opt.ssim.  To fix this, 
I overrode -O3 with -O2 and recompiled.  This worked!  The proof is in the 
screenshot below.</p>
<p><img alt="OpenACR HelloWorld" src="assets/images/202402/OpenACR.Hello.png" /></p>
<h2 id="next-step">Next Step</h2>
<p>Perhaps we can remove this gcc build problem by building with clang instead. 
That will be in the next experiment.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>